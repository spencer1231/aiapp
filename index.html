<!DOCTYPE html>
<html>
<head>
    <title>ê·€ì—¬ìš´ Teachable Machine ì¹œêµ¬</title>
    <style>
        /* ì „ì²´ í˜ì´ì§€ ìŠ¤íƒ€ì¼ */
        body {
            font-family: 'Arial', sans-serif; /* ê¹”ë”í•œ í°íŠ¸ */
            background-color: #f0f8ff; /* ì—°í•œ í•˜ëŠ˜ìƒ‰ ë°°ê²½ìœ¼ë¡œ í¬ê·¼í•œ ëŠë‚Œ */
            display: flex;
            justify-content: center; /* ê°€ìš´ë° ì •ë ¬ */
            align-items: center; /* ì„¸ë¡œ ê°€ìš´ë° ì •ë ¬ */
            min-height: 100vh; /* í™”ë©´ ì „ì²´ ë†’ì´ ì‚¬ìš© */
            margin: 0;
            padding: 20px;
            box-sizing: border-box; /* íŒ¨ë”©ì´ ë„ˆë¹„ì— í¬í•¨ë˜ë„ë¡ */
        }

        /* ë©”ì¸ ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ */
        .container {
            background-color: #ffffff; /* í°ìƒ‰ ì»¨í…Œì´ë„ˆë¡œ ê¹”ë”í•˜ê²Œ */
            border-radius: 20px; /* ë‘¥ê¸€ë‘¥ê¸€ ê·€ì—¬ìš´ ëª¨ì„œë¦¬ */
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1); /* ì€ì€í•œ ê·¸ë¦¼ìë¡œ ì…ì²´ê° */
            padding: 30px;
            text-align: center;
            max-width: 900px;
            width: 100%;
            display: flex;
            flex-direction: column; /* ì„¸ë¡œë¡œ ìŒ“ì´ë„ë¡ */
            gap: 25px; /* ìš”ì†Œë“¤ ì‚¬ì´ ê°„ê²© */
        }

        /* ì œëª© ìŠ¤íƒ€ì¼ */
        h1 {
            color: #4682b4; /* ìŠ¤í‹¸ ë¸”ë£¨ ìƒ‰ìƒìœ¼ë¡œ ì‹œì›í•˜ê²Œ */
            margin-bottom: 25px;
            font-size: 2.2em; /* ì œëª©ì€ í¬ê²Œ! */
            font-weight: bold;
        }

        /* ì‹œì‘ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        button {
            background-color: #ffb6c1; /* ì—°í•œ ë¶„í™ìƒ‰ ë²„íŠ¼ìœ¼ë¡œ ì‚¬ë‘ìŠ¤ëŸ½ê²Œ */
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 30px; /* ë™ê¸€ë™ê¸€ ë²„íŠ¼ */
            cursor: pointer; /* ë§ˆìš°ìŠ¤ ì˜¬ë¦¬ë©´ ì†ê°€ë½ ëª¨ì–‘ */
            font-size: 1.2em;
            font-weight: bold;
            transition: background-color 0.3s ease, transform 0.2s ease; /* ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜ */
            box-shadow: 0 4px 10px rgba(255, 182, 193, 0.5); /* ë²„íŠ¼ì—ë„ ì€ì€í•œ ê·¸ë¦¼ì */
            margin-bottom: 25px;
        }

        button:hover {
            background-color: #ff69b4; /* ë§ˆìš°ìŠ¤ ì˜¬ë¦¬ë©´ ì§„í•œ ë¶„í™ìƒ‰ìœ¼ë¡œ ë³€ì‹ ! */
            transform: translateY(-2px); /* ì‚´ì§ ë– ì˜¤ë¥´ëŠ” íš¨ê³¼ */
        }

        /* ì›¹ìº ê³¼ ë¼ë²¨ ì˜ì—­ì„ ë‹´ëŠ” ì»¨í…Œì´ë„ˆ */
        .content-area {
            display: flex;
            flex-wrap: wrap; /* í™”ë©´ ì‘ì•„ì§€ë©´ ì¤„ë°”ê¿ˆ */
            justify-content: center; /* ê°€ìš´ë° ì •ë ¬ */
            gap: 30px; /* ì›¹ìº ê³¼ ë¼ë²¨ ì‚¬ì´ ê°„ê²© */
        }

        /* ì›¹ìº  ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ */
        #webcam-container {
            border: 5px solid #add8e6; /* ì—°í•œ íŒŒë€ìƒ‰ í…Œë‘ë¦¬ë¡œ ê¹”ë”í•˜ê²Œ */
            border-radius: 15px; /* ë‘¥ê·¼ ëª¨ì„œë¦¬ */
            overflow: hidden; /* ë‚´ìš©ì´ ë„˜ì¹˜ë©´ ìˆ¨ê¸°ê¸° */
            width: 200px; /* ì›¹ìº  í¬ê¸° ê³ ì • */
            height: 200px;
            flex-shrink: 0; /* í¬ê¸°ê°€ ì¤„ì–´ë“¤ì§€ ì•Šë„ë¡ */
        }

        #webcam-container canvas {
            display: block; /* ìº”ë²„ìŠ¤ ì•„ë˜ ìƒê¸°ëŠ” ë¯¸ì„¸í•œ ì—¬ë°± ì œê±° */
        }

        /* ì˜ˆì¸¡ ë¼ë²¨ ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ */
        #label-container {
            display: flex;
            flex-direction: column;
            gap: 10px; /* ë¼ë²¨ë“¤ ì‚¬ì´ ê°„ê²© */
            flex-grow: 1; /* ë‚¨ì€ ê³µê°„ì„ ì±„ìš°ë„ë¡ ëŠ˜ì–´ë‚˜ê¸° */
            max-width: 300px; /* ì˜ˆì¸¡ ë¼ë²¨ ìµœëŒ€ ë„ˆë¹„ */
            min-width: 200px;
        }

        /* ê°œë³„ ì˜ˆì¸¡ ë¼ë²¨ ìŠ¤íƒ€ì¼ */
        #label-container div {
            background-color: #e0ffff; /* ì—°í•œ ì²­ë¡ìƒ‰ ë°°ê²½ìœ¼ë¡œ ì‹œì›í•˜ê²Œ */
            padding: 12px 15px;
            border-radius: 10px; /* ë‘¥ê·¼ ëª¨ì„œë¦¬ */
            font-size: 1.1em;
            color: #36454f; /* ì–´ë‘ìš´ íšŒìƒ‰ ê¸€ì”¨ */
            text-align: left;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08); /* ì€ì€í•œ ê·¸ë¦¼ì */
            font-weight: 600; /* ì‚´ì§ ë‘ê»ê²Œ */
            min-height: 40px; /* ë‚´ìš©ì´ ì—†ì–´ë„ ë†’ì´ ìœ ì§€ */
            display: flex; /* í…ìŠ¤íŠ¸ ì„¸ë¡œ ì¤‘ì•™ ì •ë ¬ì„ ìœ„í•´ */
            align-items: center; /* í…ìŠ¤íŠ¸ ì„¸ë¡œ ì¤‘ì•™ ì •ë ¬ */
            justify-content: center; /* í…ìŠ¤íŠ¸ ê°€ë¡œ ì¤‘ì•™ ì •ë ¬ */
        }

        /* ëª¨ë°”ì¼ ë°˜ì‘í˜•: í™”ë©´ì´ ì‘ì•„ì§€ë©´ ì„¸ë¡œë¡œ ì •ë ¬ */
        @media (max-width: 768px) {
            .content-area {
                flex-direction: column; /* ì„¸ë¡œë¡œ ìŒ“ì´ë„ë¡ */
                align-items: center; /* ê°€ìš´ë° ì •ë ¬ */
            }
            #label-container {
                max-width: 100%; /* ëª¨ë°”ì¼ì—ì„œëŠ” ë„ˆë¹„ ê½‰ ì±„ìš°ê¸° */
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>âœ¨ ê·€ìš”ë¯¸ Teachable Machine ì¹œêµ¬! âœ¨</h1>
        <button type="button" onclick="init()">ì‹œì‘í•˜ê¸°! ğŸš€</button>
        <div class="content-area">
            <div id="webcam-container"></div>
            <div id="label-container"></div>
        </div>
    </div>

    <!-- ê¸°ì¡´ ìŠ¤í¬ë¦½íŠ¸ ê·¸ëŒ€ë¡œ ìœ ì§€ -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest/dist/teachablemachine-image.min.js"></script>
    <script type="text/javascript">
        // More API functions here:
        // https://github.com/googlecreativelab/teachablemachine-community/tree/master/libraries/image

        // the link to your model provided by Teachable Machine export panel
        const URL = "https://teachablemachine.withgoogle.com/models/ZZZRWKFSJ/";

        let model, webcam, labelContainer, maxPredictions;

        // Load the image model and setup the webcam
        async function init() {
            const modelURL = URL + "model.json";
            const metadataURL = URL + "metadata.json";

            // load the model and metadata
            // Refer to tmImage.loadFromFiles() in the API to support files from a file picker
            // or files from your local hard drive
            // Note: the pose library adds "tmImage" object to your window (window.tmImage)
            model = await tmImage.load(modelURL, metadataURL);
            maxPredictions = model.getTotalClasses();

            // Convenience function to setup a webcam
            const flip = true; // whether to flip the webcam
            webcam = new tmImage.Webcam(200, 200, flip); // width, height, flip
            await webcam.setup(); // request access to the webcam
            await webcam.play();
            window.requestAnimationFrame(loop);

            // append elements to the DOM
            document.getElementById("webcam-container").appendChild(webcam.canvas);
            labelContainer = document.getElementById("label-container");
            // ì˜ˆì¸¡ ê²°ê³¼ëŠ” ì´ì œ í•˜ë‚˜ì˜ divì—ë§Œ í‘œì‹œí•  ì˜ˆì •ì´ë¯€ë¡œ, divë¥¼ í•˜ë‚˜ë§Œ ì¶”ê°€í•©ë‹ˆë‹¤.
            labelContainer.appendChild(document.createElement("div"));
        }

        async function loop() {
            webcam.update(); // update the webcam frame
            await predict();
            window.requestAnimationFrame(loop);
        }

        // run the webcam image through the image model
        async function predict() {
            // predict can take in an image, video or canvas html element
            const prediction = await model.predict(webcam.canvas);

            // ê°€ì¥ í™•ë¥ ì´ ë†’ì€ í´ë˜ìŠ¤ë¥¼ ì°¾ì•„ìš”!
            let topPrediction = prediction[0];
            for (let i = 1; i < prediction.length; i++) {
                if (prediction[i].probability > topPrediction.probability) {
                    topPrediction = prediction[i];
                }
            }

            let message = "";
            const probabilityPercent = (topPrediction.probability * 100).toFixed(0); // ì†Œìˆ˜ì  ì—†ì´ ë°±ë¶„ìœ¨!

            // 'good'ê³¼ 'bad'ì— ë”°ë¼ ë‹¤ë¥¸ ë©”ì‹œì§€ë¥¼ ë³´ì—¬ì¤„ê²Œìš”!
            if (topPrediction.className === 'good') {
                message = `ì§€ê¸ˆì€ ê¹¨ì–´ìˆëŠ” ìƒíƒœì˜ˆìš”! (í™•ë¥ : ${probabilityPercent}%) ğŸ˜Š`;
            } else if (topPrediction.className === 'bad') {
                message = `ì§€ê¸ˆ ì¡¸ê³  ìˆëŠ” ê²ƒ ê°™ì•„ìš”! (í™•ë¥ : ${probabilityPercent}%) ğŸ˜´`;
            } else {
                // í˜¹ì‹œ ë‹¤ë¥¸ í´ë˜ìŠ¤ê°€ ìˆë‹¤ë©´, ì´ë ‡ê²Œ ë³´ì—¬ì¤„ê²Œ!
                message = `ìŒ... ì´ê±´ ${topPrediction.className} ê°™ë„¤ìš”! (í™•ë¥ : ${probabilityPercent}%) ğŸ¤”`;
            }

            // labelContainerì˜ ì²« ë²ˆì§¸ divì— ë©”ì‹œì§€ë¥¼ ì—…ë°ì´íŠ¸í•´ìš”.
            labelContainer.childNodes[0].innerHTML = message;
        }
    </script>
</body>
</html>
